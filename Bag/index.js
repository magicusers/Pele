!function(){"use strict";var e={343:function(e,t,n){function r(e,t,n){var r=[],o=Date.now();return n=n||1e3,function(i){var a=Date.now();a-o>n&&(r=[]),o=a,r.push(i);var c=r.join("");e.includes(c)&&(t(c),r=[])}}n.d(t,{q:function(){return r}})},326:function(e,t,n){n.d(t,{F:function(){return i}});var r,o=(r={aa:"audio/audible",aac:"audio/vnd.dlna.adts",aax:"audio/vnd.audible.aax",adt:"audio/vnd.dlna.adts",adts:"audio/vnd.dlna.adts",aif:"audio/aiff",aifc:"audio/aiff",aiff:"audio/aiff",asf:"video/x-ms-asf",asx:"video/x-ms-asf",au:"audio/basic",avi:"video/avi",bmp:"image/bmp",dib:"image/bmp",gif:"image/gif",ico:"image/x-icon",jfif:"image/jpeg",jpe:"image/jpeg",jpeg:"image/jpeg",jpg:"image/jpeg",m1v:"video/mpeg",m2t:"video/vnd.dlna.mpeg-tts",m2ts:"video/vnd.dlna.mpeg-tts",m2v:"video/mpeg",m3u:"audio/mpegurl",m3u8:"audio/x-mpegurl",m4a:"audio/m4a",m4b:"audio/m4b",m4p:"audio/m4p",m4r:"audio/x-m4r",m4v:"video/x-m4v",mid:"audio/mid",midi:"audio/mid",mod:"video/mpeg",mov:"video/quicktime",mp2:"audio/mpeg",mp2v:"video/mpeg",mp3:"audio/mpeg",mp4:"video/mp4",mp4v:"video/mp4",mpa:"video/mpeg",mpe:"video/mpeg",mpeg:"video/mpeg",mpg:"video/mpeg",mpv2:"video/mpeg",oga:"audio/ogg",ogv:"video/ogg",pls:"audio/scpls",png:"image/png",rmi:"audio/mid",snd:"audio/basic",svg:"image/svg+xml",ts:"video/vnd.dlna.mpeg-tts",tts:"video/vnd.dlna.mpeg-tts",wav:"audio/wav",wave:"audio/wav",wax:"audio/x-ms-wax",wm:"video/x-ms-wm",wma:"audio/x-ms-wma",wmv:"video/x-ms-wmv",wmx:"video/x-ms-wmx",wvx:"video/x-ms-wvx"},function(e){return e&&r[e.toLowerCase()]});function i(e){var t,n=e;try{var r=(new DOMParser).parseFromString(e,"text/html").body.firstElementChild;if(r){var i=r.tagName.toLowerCase();switch(i){case"img":case"iframe":n=r.getAttribute("src"),t=i;break;case"a":n=r.getAttribute("href"),t="iframe"}}if(!t){t="iframe",new URL(e);var a=e.split("#").shift().split("?").shift().split("/").pop().split(".").pop(),c=o(a);c&&(c.match(/image.*/)?t="img":c.match(/video.*/)?t="video":c.match(/audio.*/)&&(t="audio"))}}catch(e){t=null}return[t,n]}},350:function(e,t,n){n.d(t,{C:function(){return a},T:function(){return c}});var r=n(460),o={typeMagicIFrame:"magic.iframe"};Aθεος.Freyja.AddHandler((function(e,t){for(var n,r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(n=console).debug.apply(n,["Freyja IPC",t].concat(o)),"Mediaplayer.Control.Directive"===t&&Aθεος.Freyja.Children().forEach((function(e){var n;return(n=Aθεος.Freyja).QueryChild.apply(n,[e,t].concat(o))}))}));var i={};function a(e,t){if(e===o.typeMagicIFrame){var n=t,r=Aθεος.Αφροδίτη.GenerateNewInstanceURL(location.protocol+"//"+n.Source);i[r]=n,t=r,e="iframe"}return[e,t]}function c(e,t,n,a,c){var u,l=e.cloneNode(!0);function d(e,n){var r=document.createElement("iframe");if(e.appendChild(r),e.appendChild(t.cloneNode(!0)),n in i){var o=n,a=i[o];delete i[o],r.addEventListener("load",(function(){Aθεος.Freyja.OnReadyChild(r).then((function(){console.debug("Import data",r),Aθεος.Freyja.QueryChild(r.contentWindow,"Import",a.MimeType,a.Payload).catch((function(e){return console.warn("Import error",e)}))})).catch((function(e){return console.warn("import fail",e)}))}))}return r}switch(a){case"img":(u=document.createElement("div")).classList.add("pele-responsive_image_container"),u.style.backgroundImage="url(".concat(c,")"),(0,r.Nz)(l.querySelector(".card-op-sleep")),n.appendChild(u),u.PeleExportPromise=function(){return Promise.resolve([a,c])};break;case"iframe":var s=c;(u=d(n,c)).setAttribute("allow","camera;microphone"),u.setAttribute("src",s),u.PeleExportPromise=function(){return Aθεος.Freyja.QueryChild(u.contentWindow,"Export").then((function(e){return Promise.resolve([o.typeMagicIFrame,JSON.parse(e)])})).catch((function(){return Promise.resolve([a,c])}))};break;case"audio":case"video":console.warn("can't handle media type",a);break;default:(u=d(n,c)).setAttribute("srcdoc",c),u.PeleExportPromise=function(){return Promise.resolve([a,c])}}return n.appendChild(l),u}},460:function(e,t,n){function r(e){e.parentElement.removeChild(e)}function o(e){var t=document.getElementById(e);return r(t),t.removeAttribute("id",t),t}function i(e,t){var n=Element.prototype;return(n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||n.oMatchesSelector).call(e,t)}n.d(t,{C4:function(){return i},Nz:function(){return r},gR:function(){return o}})}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function t(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function i(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=o(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==o(t)?t:String(t)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,i(r.key),r)}}function c(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=l(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},d.apply(this,arguments)}function s(e,t){return s=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},s(e,t)}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&s(e,t)}var f=_,m=n.n(f),v=n(326),y=n(343),h=n(460),g=n(350);function b(e,t,n){return t=l(t),function(e,t){if(t&&("object"===o(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return u(e)}(e,w()?Reflect.construct(t,n||[],l(e).constructor):t.apply(e,n))}function w(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(w=function(){return!!e})()}var A=m().once((function(){var n=0;function o(e){return(0,h.C4)(e,".card-remove, .card-remove i")}var i=function(i){function a(e,t){var n;return r(this,a),(n=b(this,a,[e])).patched_Action=t.PatchRaw(function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];this.original_Action.apply(this,n.concat([e]))}.bind(u(n))),n.grid.getElement().addEventListener("change",(function(e){console.debug("onchange",e)})),n}return p(a,Pele.MuuriSlideShow),c(a,[{key:"Action",value:function(){this.patched_Action&&this.patched_Action.apply(this,arguments)}},{key:"original_Action",value:function(){d(l(a.prototype),"Action",this).apply(this,arguments)}},{key:"AddType",value:function(e,t){var r=function(e,t){var r=++n,o=r;"iframe"==e&&(t=function(e){var t=new URL(e),n=t.searchParams;return n.delete("i"),t.protocol+"//"+t.host+t.pathname+n}(t));var i=m.cloneNode(!0);i.setAttribute("data-id",r),i.setAttribute("data-title",o);var a=i.querySelector(".card-content");return(0,g.T)(w,f,a,e,t)._pele_export_data=[e,t],i.querySelector(".card-id").innerHTML=r,i}(e,t);this.DoAddElement(r)}},{key:"DoAddText",value:function(n){var r;this.AddType.apply(this,function(t){if(Array.isArray(t))return e(t)}(r=(0,v.F)(n))||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(r)||t(r)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())}},{key:"InDragCancelZone",value:function(e,t){return o(t.target)||d(l(a.prototype),"InDragCancelZone",this).call(this,e,t)}},{key:"OnClick",value:function(e){console.debug("OnClick",e);var t=e.target;o(t)?this.RemoveItem(t):(0,h.C4)(t,".card-op-Previous")?this.SlidePrevious():(0,h.C4)(t,".card-op-Next")?this.SlideNext():(0,h.C4)(t,".card-op-ExitFullScreen")?this.DoEscape():d(l(a.prototype),"OnClick",this).call(this,e)}},{key:"OnDblClick",value:function(e){console.debug("OnDblClick",e),e.target,d(l(a.prototype),"OnDblClick",this).call(this,e)}},{key:"ToggleZoom",value:function(){}},{key:"CreateDragShadow",value:function(e){var t=d(l(a.prototype),"CreateDragShadow",this).call(this,e),n=t.querySelector("iframe");return n&&n.parentElement.removeChild(n),t}},{key:"DoEscape",value:function(){this.SlideUnzoom(),this.ExitEditMode()}},{key:"Import",value:function(e){var n=this;console.debug("import slides",e),e.forEach((function(e){var r,o,i=(o=2,function(e){if(Array.isArray(e))return e}(r=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(e){l=!0,o=e}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(r,o)||t(r,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=i[0],c=i[1];n.DoAdd(JSON.stringify((0,g.C)(a,c)))}))}},{key:"Export",value:function(){console.debug("Export slides");var e=this.grid.getItems().map((function(e,t){return(n=e.getElement(),n.querySelector(".card-content").firstElementChild).PeleExportPromise();var n}));return Promise.all(e)}}]),a}(),a=new i({ID:"coolslides"},this);this.slideshow=a,window.DoNext=function(){return a.SlideNext()},window.DoPrevious=function(){return a.SlidePrevious()},window.DoExitFullScreen=function(){return a.DoEscape()},document.addEventListener("paste",(function(e){var t=(e.clipboardData||window.clipboardData).getData("text");t&&(console.debug("pasty",t),a.DoAdd(t),e.preventDefault(),e.stopPropagation())}));var s=(0,y.q)(["ed","ED"],(function(e){console.debug("Invoked:",e),a.EnterEditMode()}));document.addEventListener("keydown",(function(e){switch(console.debug("key",e.code,e.keyCode,e.key),e.key){case"Escape":a.DoEscape();break;case"ArrowLeft":a.SlidePrevious();break;case"ArrowRight":a.SlideNext();break;case"ArrowUp":case"ArrowDown":break;default:s(e.key)}}));var f=(0,h.gR)("idTemplateCardOperations"),m=(0,h.gR)("idTemplateItem"),w=(0,h.gR)("idTemplateNavigation");Aθεος.Freyja.AddHandler((function(e,t){var n;if("OpenNewInstance"===t){for(var r=arguments.length,o=new Array(r>2?r-2:0),i=2;i<r;i++)o[i-2]=arguments[i];(n=Aθεος.Freyja).QueryParent.apply(n,["OpenNewInstance"].concat(o)).then((function(){return e.Success()})).catch((function(t){e.Fail()})),e.Pending()}}))})),x="application/x-magicusers-list",E=function(e){function t(){return r(this,t),b(this,t,[{Title:"Magic Bag",ReloadDocumentOnReset:!0,Container:document.getElementById("idMagicUsersContainer"),Manifest:{Description:"Drop links to Magic Web Apps, and other online content. This collection can be used to launch NEW instances that you can share with others."}}])}return p(t,Aθεος.Αφροδίτη.SharedContainerWorld),c(t,[{key:"Import",value:function(e,t){e===x&&this.slideshow.Import(t)}},{key:"Export",value:function(){return this.slideshow.Export().then((function(e){return[x,e]}))}},{key:"OnInit",value:function(){d(l(t.prototype),"OnInit",this).call(this),A.call(this)}}]),t}();Aθεος.Αφροδίτη.OnReady().then((function(){return new E}))}()}();