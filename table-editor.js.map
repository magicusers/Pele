{"version":3,"sources":["webpack://Pele/webpack/universalModuleDefinition","webpack://Pele/webpack/bootstrap","webpack://Pele/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://Pele/./node_modules/@babel/runtime/helpers/createClass.js","webpack://Pele/./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack://Pele/./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack://Pele/./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack://Pele/./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack://Pele/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://Pele/./src/table-editor.js","webpack://Pele/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://Pele/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://Pele/./node_modules/@babel/runtime/helpers/nonIterableRest.js"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","instance","Constructor","TypeError","_defineProperties","target","props","length","descriptor","configurable","writable","protoProps","staticProps","arrayWithoutHoles","iterableToArray","nonIterableSpread","arr","Array","isArray","arr2","iter","iterator","toString","from","arrayWithHoles","iterableToArrayLimit","nonIterableRest","TableEditor","options","console","debug","this","eTable","document","getElementById","ID","$body","querySelector","rowtemplate","$template","cloneNode","$lastRemoveRow","undefined","defaultValues","serializeRow","recordsCount","connectedCallback","setupDragHandlers","slice","children","map","cell","DoChange","eCell","cells","event","onChange","getCellData","matches","handleInput","to","eFrom","eTo","insertBefore","closest","eRow","parentNode","indexOf","cellIndex","$input","$row","index","record","changeType","getAttribute","editableTable","$rows","newRecordsCount","createRecordsAbove","$lastRow","isEmptyRow","appendChild","removeChild","removeEmptyRows","rowIndex","row","self","addEventListener","preventDefault","classList","add","dataTransfer","effectAllowed","setData","types","includes","remove","originalrow","getData","row_index","moveRow","body","addRow","clearTimeout","removeTimeout","handleFocus","capture","passive","setTimeout","handleBlur","deleteRow","focus","handleClick","handleChange","entries","querySelectorAll","trim","$currentRow","$prev","previousElementSibling","_arr","_n","_d","_e","_s","_i","next","done","push","err"],"mappings":"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","file":"table-editor.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Pele\"] = factory();\n\telse\n\t\troot[\"Pele\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 16);\n","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","function _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nmodule.exports = _arrayWithoutHoles;","function _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","export class TableEditor\n{\n\tconstructor(options)\n\t{\n\t\tconsole.debug(options);\n\n\t\tthis.eTable = document.getElementById(options.ID);\n\n\t\tthis.$body = this.eTable.querySelector(\"tbody\");\n\t\tconst rowtemplate = this.$body.querySelector(\"tr:last-child\");\n\t\tthis.$template = rowtemplate.cloneNode(true);\n\t\tthis.$lastRemoveRow = undefined;\n\n\t\tthis.defaultValues = serializeRow(this.$template);\n\t\tthis.recordsCount = 0;\n\n\t\tconnectedCallback.call(this);\n\t\tsetupDragHandlers.call(this, rowtemplate);\n\t}\n\n\tget()\n\t{\n\t\treturn Array.prototype.slice\n\t\t\t.call(this.$body.children, 0, -1)\n\t\t\t.map(serializeRow);\n\t}\n\n\tonChange(cell)\n\t{\n\t\t//console.debug(\"change\", cell);\n\t\tthis.DoChange(cell);\n\t}\n\n\tDoChange(cell)\n\t{\n\n\t\tconst eRow = this.$body.children[cell[0]];\n\t\tconst eCell = eRow.cells[cell[1]];\n\n\t\teCell.querySelector('[name]').value = cell[2];\n\t\tconsole.debug(\"DoChange\", cell, eCell);\n\t}\n\n\thandleChange(event)\n\t{\n\t\tthis.onChange(this.getCellData(event.target));\n\t\tif (event.target.matches(\"select,input[type=checkbox],input[type=radio]\"))\n\t\t{\n\t\t\tthis.handleInput(event);\n\t\t\treturn;\n\t\t}\n\t}\n\n\tmoveRow(from, to)\n\t{\n\t\tconst eFrom = this.$body.children[from];\n\t\tconst eTo = this.$body.children[to];\n\n\t\tif (eFrom && eTo)\n\t\t\tthis.$body.insertBefore(eFrom, eTo);\n\t}\n\n\tgetCellData(target)\n\t{\n\t\tconst eCell = target.closest(\"td\");\n\t\tconst eRow = eCell.closest(\"tr\");\n\n\t\tconst indexRow = [...eRow.parentNode.children].indexOf(eRow);\n\n\t\treturn [indexRow, eCell.cellIndex, target.value];\n\t}\n\n\t/**\n\t * Handle `input` events as well as `change` events of <select>s and other\n\t * tags which do not support `input`.\n\t *\n\t * @param {EditableTable} editableTable\n\t * @param {Event} event\n\t */\n\thandleInput(event)\n\t{\n\t\tconst $input = event.target;\n\t\tconst $row = $input.closest(\"tr\");\n\t\tconst index = [...$row.parentNode.children].indexOf($row);\n\t\tconst record = serializeRow($row);\n\t\tconst isNew = index + 1 > this.recordsCount;\n\t\tconst changeType = isNew ? \"add\" : \"update\";\n\n\t\tif (changeType === \"update\")\n\t\t{\n\t\t\trecord[$input.getAttribute(\"name\")] = $input.value;\n\t\t}\n\n\t\tif (changeType === \"add\")\n\t\t{\n\t\t\tthis.recordsCount += +1;\n\t\t\tcreateRecordsAbove(this, index);\n\t\t}\n\n\t}\n\n\n\n\t/**\n\t * add a new row when focus is set in the last one. That makes\n\t * the table grow automatically, no need for extra buttons.\n\t *\n\t * @param {EditableTable} editableTable\n\t * @param {object} record\n\t * @param {object} options\n\t */\n\taddRow()\n\t{\n\t\tconst $row = this.$template.cloneNode(true);\n\n\n\t\tconst $lastRow = this.$body.querySelector(\"tr:last-child\");\n\n\t\tif (isEmptyRow(this, $lastRow))\n\t\t\treturn $lastRow;\n\n\t\tsetupDragHandlers.call(this, $row);\n\n\t\treturn this.$body.appendChild($row);\n\t}\n\n\tdeleteRow(index)\n\t{\n\t\tvar $row = this.$body.children[index];\n\t\tthis.$body.removeChild($row);\n\n\t\tthis.recordsCount--;\n\n\t\tremoveEmptyRows(this);\n\t}\n};\n\nfunction rowIndex(row)\n{\n\treturn [...row.parentNode.children].indexOf(row);\n}\n\nfunction setupDragHandlers(row)\n{\n\tconst self = this;\n\tconst DRAGON_DROP_MIME_TYPE = \"application/x-pele-move-row\";\n\tif (row.getAttribute(\"draggable\"))\n\t{\n\t\tconst eTable = this.eTable;\n\n\t\trow.addEventListener(\"dragstart\", function (event)\n\t\t{\n\t\t\t//console.debug(\"dragstart\", event.target);\n\t\t\t\n\t\t\tif (isEmptyRow(self, row))\n\t\t\t\tevent.preventDefault();\n\t\t\telse\n\t\t\t{\n\t\t\t\teTable.classList.add(\"pele_dragover\");\n\t\t\t\tevent.dataTransfer.effectAllowed=\"move\";\n\t\t\t\tevent.dataTransfer.setData(DRAGON_DROP_MIME_TYPE, rowIndex(row));\n\t\t\t}\n\t\t});\n\n\t\trow.addEventListener(\"dragover\", function (event)\n\t\t{\n\t\t\tif (event.dataTransfer.types.includes(DRAGON_DROP_MIME_TYPE))\n\t\t\t{\n\t\t\t\trow.classList.add(\"pele_dragover\");\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\t\trow.addEventListener(\"dragenter\", function (event)\n\t\t{\n\t\t\t//row.classList.add(\"pele_dragover\");\n\t\t\t//event.preventDefault();\n\t\t});\n\t\trow.addEventListener(\"dragleave\", function (event)\n\t\t{\n\t\t\trow.classList.remove(\"pele_dragover\");\n\t\t\t//event.preventDefault();\n\t\t});\n\n\n\t\trow.addEventListener(\"drop\", function (event)\n\t\t{\n\t\t\trow.classList.remove(\"pele_dragover\");\n\t\t\teTable.classList.remove(\"pele_dragover\");\n\n\t\t\tconst originalrow = event.dataTransfer.getData(DRAGON_DROP_MIME_TYPE);\n\t\t\tif (originalrow !== undefined)\n\t\t\t{\n\t\t\t\tconst row_index = rowIndex(row);\n\t\t\t\tif (originalrow != row_index)\n\t\t\t\t{\n\t\t\t\t\tconsole.debug(\"move successufl\", originalrow, row_index);\n\t\t\t\t\tself.moveRow(originalrow, row_index);\n\t\t\t\t}\n\t\t\t\tevent.preventDefault();\n\t\t\t}\n\t\t});\n\n\t\trow.addEventListener(\"dragend\", function (event)\n\t\t{\n\t\t\teTable.classList.remove(\"pele_dragover\");\n\t\t\tevent.preventDefault();\n\t\t});\n\n\t}\n\n}\n\nfunction connectedCallback()\n{\n\tconst body = this.$body;\n\n\tbody.addEventListener(\"focus\", event => handleFocus(this, event), {\n\t\tcapture: true,\n\t\tpassive: true\n\t});\n\tbody.addEventListener(\"blur\", event => handleBlur(this, event), {\n\t\tcapture: true,\n\t\tpassive: true\n\t});\n\tbody.addEventListener(\"click\", event => handleClick(this, event), {\n\t\tcapture: true,\n\t\tpassive: true\n\t});\n\tbody.addEventListener(\"input\", event => this.handleInput(event), {\n\t\tcapture: true,\n\t\tpassive: true\n\t});\n\tbody.addEventListener(\"change\", event => this.handleChange(event), {\n\t\tcapture: true,\n\t\tpassive: true\n\t});\n}\n\n\n\n/**\n * Set the current raw to \"active\" and add a new row if it's the last one.\n *\n * @param {EditableTable} editableTable\n * @param {Event} event\n */\nfunction handleFocus(editableTable, event)\n{\n\tconst $row = event.target.closest(\"tr\");\n\tif ($row.matches(\"tr:last-child\"))\n\t{\n\t\teditableTable.addRow();\n\t}\n\n\t$row.classList.add(\"active\");\n\tremoveEmptyRows(editableTable, $row);\n\n\t// Stop the timout started in `handleBlur`\n\tclearTimeout(editableTable.removeTimeout);\n}\n\n/**\n * on blur, empty rows get removed from the end of the table after a timeout.\n *\n * @param {EditableTable} editableTable\n * @param {Event} event\n */\nfunction handleBlur(editableTable, event)\n{\n\tevent.target.closest(\"tr\").classList.remove(\"active\");\n\n\teditableTable.removeTimeout = setTimeout(\n\t\t() => removeEmptyRows(editableTable),\n\t\t100\n\t);\n}\n\n/**\n * If the remove button is pressed, remove the current row and all empty rows at the end.\n * Otherwise find the closest input and focus it.\n *\n * @param {EditableTable} editableTable\n * @param {Event} event\n */\nfunction handleClick(editableTable, event)\n{\n\tif (event.target.matches(\"[name]\"))\n\t{\n\t\treturn;\n\t}\n\n\tif (event.target.matches(\"[data-remove]\"))\n\t{\n\t\tconst cell = editableTable.getCellData(event.target);\n\t\teditableTable.deleteRow(cell[0]);\n\t\treturn;\n\t}\n\n\tevent.target.querySelector(\"[name]\").focus();\n}\n\n/**\n * Forward event to `handleInput` for tags that do not support the `input` event.\n *\n * @param {EditableTable} editableTable\n * @param {Event} event\n */\n\n// HELPER METHODS\n\n\n/**\n * A row is considered empty when its values match\n * the template's values\n *\n * @param {EditableTable} editableTable\n * @param {HTMLTableRowElement} $row\n */\nfunction isEmptyRow(editableTable, $row)\n{\n\tvar record = serializeRow($row);\n\n\tfor (const [property, defaultValue] of Object.entries(\n\t\teditableTable.defaultValues\n\t))\n\t{\n\t\tif (defaultValue !== record[property])\n\t\t{\n\t\t\treturn false;\n\t\t}\n\t}\n\n\treturn true;\n}\n\n/**\n * turns a row into an object\n *\n * @param {HTMLTableRowElement} $row\n */\nfunction serializeRow($row)\n{\n\tvar record = {};\n\tfor (const $input of $row.querySelectorAll(\"[name]\"))\n\t{\n\t\trecord[$input.getAttribute(\"name\")] = $input.value.trim();\n\t}\n\n\treturn record;\n}\n\n/**\n * removes all rows that are empty above the last row (the template row).\n * Optionally the current row can be passed to prevent it from being removed.\n *\n * @param {EditableTable} editableTable\n * @param {HTMLTableRowElement} $currentRow\n */\nfunction removeEmptyRows(editableTable, $currentRow)\n{\n\tconst $lastRow = editableTable.$body.querySelector(\"tr:last-child\");\n\tlet $prev = $lastRow.previousElementSibling;\n\tlet index = editableTable.$body.children.length - 2;\n\n\twhile ($prev && $prev !== $currentRow && isEmptyRow(editableTable, $prev))\n\t{\n\t\teditableTable.$body.removeChild($prev);\n\n\t\tif (index <= editableTable.recordsCount)\n\t\t{\n\t\t}\n\n\t\t$prev = $lastRow.previousElementSibling;\n\t\tindex--;\n\t\teditableTable.recordsCount--;\n\t}\n}\n\n/**\n * assure that all rows above the current row have existing records.\n *\n * @param {EditableTable} editableTable\n * @param {HTMLTableRowElement} $row\n */\nfunction createRecordsAbove(editableTable, index)\n{\n\tconst $rows = editableTable.$body.children;\n\tconst newRecordsCount = index + 1;\n\n\tfor (\n\t\t;\n\t\teditableTable.recordsCount < newRecordsCount;\n\t\teditableTable.recordsCount++\n\t)\n\t{\n\t\tindex = editableTable.recordsCount - 1;\n\t\tconst record = serializeRow($rows[index]);\n\t}\n}\n\n","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) {\n    return;\n  }\n\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nmodule.exports = _nonIterableRest;"],"sourceRoot":""}